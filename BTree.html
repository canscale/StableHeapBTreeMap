<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="ArrayUtil.html">ArrayUtil</a></li></li><li><li><a href="BTree.html">BTree</a></li></li><li><li><a href="BinarySearch.html">BinarySearch</a></li></li><li><li><a href="Check.html">Check</a></li></li><li><li><a href="NodeUtil.html">NodeUtil</a></li></li><li><li><a href="Types.html">Types</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.BTree">BTree</a></li></li><li><li><a href="#type.Node">Node</a></li></li><li><li><a href="#type.Internal">Internal</a></li></li><li><li><a href="#type.Leaf">Leaf</a></li></li><li><li><a href="#type.Data">Data</a></li></li><li><li><a href="#init">init</a></li></li><li><li><a href="#fromArray">fromArray</a></li></li><li><li><a href="#fromBuffer">fromBuffer</a></li></li><li><li><a href="#size">size</a></li></li><li><li><a href="#get">get</a></li></li><li><li><a href="#has">has</a></li></li><li><li><a href="#insert">insert</a></li></li><li><li><a href="#update">update</a></li></li><li><li><a href="#delete">delete</a></li></li><li><li><a href="#min">min</a></li></li><li><li><a href="#max">max</a></li></li><li><li><a href="#entries">entries</a></li></li><li><li><a href="#toArray">toArray</a></li></li><li><li><a href="#toBuffer">toBuffer</a></li></li><li><li><a href="#type.Direction">Direction</a></li></li><li><li><a href="#type.ScanLimitResult">ScanLimitResult</a></li></li><li><li><a href="#scanLimit">scanLimit</a></li></li><li><li><a href="#toText">toText</a></li></li><li><li><a href="#equals">equals</a></li></li></ul></nav><div class="documentation"><h1>BTree</h1><p>The BTree module collection of functions and types</p>
<div class="declaration"><h4 class="type-declaration" id="type.BTree"><span class="keyword">type </span><span class="type">BTree</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt; = <a href="Types.html#type.BTree"><span class="type">Types.BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.Node"><span class="keyword">type </span><span class="type">Node</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt; = <a href="Types.html#type.Node"><span class="type">Types.Node</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.Internal"><span class="keyword">type </span><span class="type">Internal</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt; = <a href="Types.html#type.Internal"><span class="type">Types.Internal</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.Leaf"><span class="keyword">type </span><span class="type">Leaf</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt; = <a href="Types.html#type.Leaf"><span class="type">Types.Leaf</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.Data"><span class="keyword">type </span><span class="type">Data</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt; = <a href="Types.html#type.Data"><span class="type">Types.Data</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;</h4><p></p></div><div class="declaration"><h4 class="function" id="init"><code><span class="keyword">public func </span><span class="fnname">init</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<span class="parameter">order</span> : ?<span class="type">Nat</span>) : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;</code></h4><p><p>Initializes an empty BTree. By default, set the BTree to have order 8, and enforce the the order be greater than 4, but lower than 512</p>
</p></div><div class="declaration"><h4 class="function" id="fromArray"><code><span class="keyword">public func </span><span class="fnname">fromArray</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<br/>  <span class="parameter">order</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">compare</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">O.Order</span>, <br/>  <span class="parameter">kvPairs</span> : [(<span class="type">K</span>, <span class="type">V</span>)]<br/>) : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;</code></h4><p><p>Allows one to quickly create a BTree from an array of key value pairs</p>
</p></div><div class="declaration"><h4 class="function" id="fromBuffer"><code><span class="keyword">public func </span><span class="fnname">fromBuffer</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<br/>  <span class="parameter">order</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">compare</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">O.Order</span>, <br/>  <span class="parameter">kvPairs</span> : <span class="type">Buffer.Buffer</span>&lt;(<span class="type">K</span>, <span class="type">V</span>)&gt;<br/>) : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;</code></h4><p><p>Allows one to quickly create a BTree from an Buffer of key value pairs</p>
<p>The Buffer class type returned is described in the Motoko-base library here:
https://github.com/dfinity/motoko-base/blob/master/src/Buffer.mo
It does <strong>not</strong> persist to stable memory</p>
</p></div><div class="declaration"><h4 class="function" id="size"><code><span class="keyword">public func </span><span class="fnname">size</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<span class="parameter">tree</span> : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;) : <span class="type">Nat</span></code></h4><p><p>Get the current count of key-value pairs present in the BTree</p>
</p></div><div class="declaration"><h4 class="function" id="get"><code><span class="keyword">public func </span><span class="fnname">get</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<br/>  <span class="parameter">tree</span> : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;, <br/>  <span class="parameter">compare</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">O.Order</span>, <br/>  <span class="parameter">key</span> : <span class="type">K</span><br/>) : ?<span class="type">V</span></code></h4><p><p>Retrieves the value corresponding to the key of BTree if it exists</p>
</p></div><div class="declaration"><h4 class="function" id="has"><code><span class="keyword">public func </span><span class="fnname">has</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<br/>  <span class="parameter">tree</span> : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;, <br/>  <span class="parameter">compare</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">O.Order</span>, <br/>  <span class="parameter">key</span> : <span class="type">K</span><br/>) : <span class="type">Bool</span></code></h4><p><p>Returns a boolean representing if the BTree contains the provided key or not</p>
</p></div><div class="declaration"><h4 class="function" id="insert"><code><span class="keyword">public func </span><span class="fnname">insert</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<br/>  <span class="parameter">tree</span> : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;, <br/>  <span class="parameter">compare</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">O.Order</span>, <br/>  <span class="parameter">key</span> : <span class="type">K</span>, <br/>  <span class="parameter">value</span> : <span class="type">V</span><br/>) : ?<span class="type">V</span></code></h4><p><p>Inserts an element into a BTree</p>
</p></div><div class="declaration"><h4 class="function" id="update"><code><span class="keyword">public func </span><span class="fnname">update</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<br/>  <span class="parameter">tree</span> : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;, <br/>  <span class="parameter">compare</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">O.Order</span>, <br/>  <span class="parameter">key</span> : <span class="type">K</span>, <br/>  <span class="parameter">updateFunction</span> : (?<span class="type">V</span>) -&gt; <span class="type">V</span><br/>) : ?<span class="type">V</span></code></h4><p><p>Applies a function to the value of an existing key of a BTree
If the element does not yet exist in the BTree it creates a new key and value according to the result of passing null to the updateFunction</p>
</p></div><div class="declaration"><h4 class="function" id="delete"><code><span class="keyword">public func </span><span class="fnname">delete</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<br/>  <span class="parameter">tree</span> : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;, <br/>  <span class="parameter">compare</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">O.Order</span>, <br/>  <span class="parameter">key</span> : <span class="type">K</span><br/>) : ?<span class="type">V</span></code></h4><p><p>Deletes an element from a BTree</p>
</p></div><div class="declaration"><h4 class="function" id="min"><code><span class="keyword">public func </span><span class="fnname">min</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<span class="parameter">tree</span> : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;) : ?(<span class="type">K</span>, <span class="type">V</span>)</code></h4><p><p>Returns the minimum key in a BTree with its associated value. If the BTree is empty, returns null</p>
</p></div><div class="declaration"><h4 class="function" id="max"><code><span class="keyword">public func </span><span class="fnname">max</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<span class="parameter">tree</span> : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;) : ?(<span class="type">K</span>, <span class="type">V</span>)</code></h4><p><p>Returns the maximum key in a BTree with its associated value. If the BTree is empty, returns null</p>
</p></div><div class="declaration"><h4 class="function" id="entries"><code><span class="keyword">public func </span><span class="fnname">entries</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<span class="parameter">t</span> : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;) : <span class="type">Iter.Iter</span>&lt;(<span class="type">K</span>, <span class="type">V</span>)&gt;</code></h4><p><p>Returns an ascending order BTree iterator</p>
</p></div><div class="declaration"><h4 class="function" id="toArray"><code><span class="keyword">public func </span><span class="fnname">toArray</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<span class="parameter">t</span> : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;) : [(<span class="type">K</span>, <span class="type">V</span>)]</code></h4><p><p>Returns an array of all the key-value pairs in the BTree</p>
<p>Note: If the BTree contains more entries than the message instruction limit will allow you to process in across consensus this may trap mid-iteration</p>
</p></div><div class="declaration"><h4 class="function" id="toBuffer"><code><span class="keyword">public func </span><span class="fnname">toBuffer</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<span class="parameter">t</span> : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;) : <span class="type">Buffer.Buffer</span>&lt;(<span class="type">K</span>, <span class="type">V</span>)&gt;</code></h4><p><p>Returns a buffer of all the key-value pairs in the BTree.</p>
<p>The Buffer class type returned is described in the Motoko-base library here:
https://github.com/dfinity/motoko-base/blob/master/src/Buffer.mo
It does <strong>not</strong> persist to stable memory</p>
<p>Note: If the BTree contains more entries than the message instruction limit will allow you to process in across consensus this may trap mid-iteration</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.Direction"><span class="keyword">type </span><span class="type">Direction</span> = {#fwd; #bwd}</h4><p><p>The direction of iteration
#fwd -&gt; forward (ascending)
#bwd -&gt; backwards (descending)</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.ScanLimitResult"><span class="keyword">type </span><span class="type">ScanLimitResult</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt; = { results : [(<span class="type">K</span>, <span class="type">V</span>)]; nextKey : ?<span class="type">K</span> }</h4><p><p>The object returned from a scan contains:</p>
<ul><li>results - a key value array of all results found (within the bounds and limit provided)</li><li>nextKey - an optional next key if there exist more results than the limit provided within the given bounds</li></ul></p></div><div class="declaration"><h4 class="function" id="scanLimit"><code><span class="keyword">public func </span><span class="fnname">scanLimit</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<br/>  <span class="parameter">tree</span> : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;, <br/>  <span class="parameter">compare</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">O.Order</span>, <br/>  <span class="parameter">lowerBound</span> : <span class="type">K</span>, <br/>  <span class="parameter">upperBound</span> : <span class="type">K</span>, <br/>  <span class="parameter">dir</span> : <a href="#type.Direction"><span class="type">Direction</span></a>, <br/>  <span class="parameter">limit</span> : <span class="type">Nat</span><br/>) : <a href="#type.ScanLimitResult"><span class="type">ScanLimitResult</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;</code></h4><p><p>Performs a in-order scan of the Red-Black Tree between the provided key bounds, returning a number of matching entries in the direction specified (ascending/descending) limited by the limit parameter specified in an array formatted as (K, V) for each entry</p>
<ul><li>tree - the BTree being scanned</li><li>compare - the comparison function used to compare (in terms of order) the provided bounds against the keys in the BTree</li><li>lowerBound - the lower bound used in the scan</li><li>upperBound - the upper bound used in the scan</li><li>dir - the direction of the scan</li><li>limit - the maximum possible number of items to scan (that are between the lower and upper bounds) before returning</li></ul></p></div><div class="declaration"><h4 class="function" id="toText"><code><span class="keyword">public func </span><span class="fnname">toText</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<br/>  <span class="parameter">t</span> : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;, <br/>  <span class="parameter">keyToText</span> : <span class="type">K</span> -&gt; <span class="type">Text</span>, <br/>  <span class="parameter">valueToText</span> : <span class="type">V</span> -&gt; <span class="type">Text</span><br/>) : <span class="type">Text</span></code></h4><p><p>Opinionated version of generating a textual representation of a BTree. Primarily to be used
for testing and debugging</p>
</p></div><div class="declaration"><h4 class="function" id="equals"><code><span class="keyword">public func </span><span class="fnname">equals</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<br/>  <span class="parameter">t1</span> : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;, <br/>  <span class="parameter">t2</span> : <a href="#type.BTree"><span class="type">BTree</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;, <br/>  <span class="parameter">keyEquals</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">Bool</span>, <br/>  <span class="parameter">valueEquals</span> : (<span class="type">V</span>, <span class="type">V</span>) -&gt; <span class="type">Bool</span><br/>) : <span class="type">Bool</span></code></h4><p><p>Determines if two BTrees are equivalent</p>
</p></div></div></body></html>