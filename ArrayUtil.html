<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="ArrayUtil.html">ArrayUtil</a></li></li><li><li><a href="BTree.html">BTree</a></li></li><li><li><a href="BinarySearch.html">BinarySearch</a></li></li><li><li><a href="Check.html">Check</a></li></li><li><li><a href="NodeUtil.html">NodeUtil</a></li></li><li><li><a href="Types.html">Types</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#insertAtPosition">insertAtPosition</a></li></li><li><li><a href="#insertOneAtIndexAndSplitArray">insertOneAtIndexAndSplitArray</a></li></li><li><li><a href="#splitArrayAndInsertTwo">splitArrayAndInsertTwo</a></li></li><li><li><a href="#deleteAndShiftValuesOver">deleteAndShiftValuesOver</a></li></li><li><li><a href="#replaceTwoWithElementAndShift">replaceTwoWithElementAndShift</a></li></li><li><li><a href="#insertAtPostionAndDeleteAtPosition">insertAtPostionAndDeleteAtPosition</a></li></li><li><li><a href="#type.DeletionSide">DeletionSide</a></li></li><li><li><a href="#mergeParentWithChildrenAndDelete">mergeParentWithChildrenAndDelete</a></li></li></ul></nav><div class="documentation"><h1>ArrayUtil</h1><p>A collection of Array utility functions <strong>specific</strong> to the BTree implementation</p>
<div class="declaration"><h4 class="function" id="insertAtPosition"><code><span class="keyword">public func </span><span class="fnname">insertAtPosition</span>&lt;<span class="type">T</span>&gt;(<br/>  <span class="parameter">array</span> : [<span class="keyword">var </span>?<span class="type">T</span>], <br/>  <span class="parameter">insertElement</span> : ?<span class="type">T</span>, <br/>  <span class="parameter">insertIndex</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">currentLastElementIndex</span> : <span class="type">Nat</span><br/>) : ()</code></h4><p><p>Inserts an element into a mutable array at a specific index, shifting all other elements over</p>
<p>Parameters:</p>
<p>array - the array being inserted into
insertElement - the element being inserted
insertIndex - the index at which the element will be inserted
currentLastElementIndex - the index of last <strong>non-null</strong> element in the array (used to start shifting elements over)</p>
<p>Note: This assumes that there are nulls at the end of the array and that the array is not full.
If the array is already full, this function will overflow the array size when attempting to
insert and will cause the cansiter to trap</p>
</p></div><div class="declaration"><h4 class="function" id="insertOneAtIndexAndSplitArray"><code><span class="keyword">public func </span><span class="fnname">insertOneAtIndexAndSplitArray</span>&lt;<span class="type">T</span>&gt;(<br/>  <span class="parameter">array</span> : [<span class="keyword">var </span>?<span class="type">T</span>], <br/>  <span class="parameter">insertElement</span> : <span class="type">T</span>, <br/>  <span class="parameter">insertIndex</span> : <span class="type">Nat</span><br/>) : ([<span class="keyword">var </span>?<span class="type">T</span>], <span class="type">T</span>, [<span class="keyword">var </span>?<span class="type">T</span>])</code></h4><p><p>Splits the array into two halves as if the insert has occured, omitting the middle element and returning it so that it can
be promoted to the parent internal node. This is used when inserting an element into an array of key-value data pairs that 
is already full.</p>
<p>Note: Use only when inserting an element into a FULL array &amp; promoting the resulting midpoint element.
This is NOT the same as just splitting this array!</p>
<p>Parameters:</p>
<p>array - the array being split
insertElement - the element being inserted
insertIndex - the position/index that the insertElement should be inserted</p>
</p></div><div class="declaration"><h4 class="function" id="splitArrayAndInsertTwo"><code><span class="keyword">public func </span><span class="fnname">splitArrayAndInsertTwo</span>&lt;<span class="type">T</span>&gt;(<br/>  <span class="parameter">children</span> : [<span class="keyword">var </span>?<span class="type">T</span>], <br/>  <span class="parameter">rebalancedChildIndex</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">leftChildInsert</span> : <span class="type">T</span>, <br/>  <span class="parameter">rightChildInsert</span> : <span class="type">T</span><br/>) : ([<span class="keyword">var </span>?<span class="type">T</span>], [<span class="keyword">var </span>?<span class="type">T</span>])</code></h4><p><p>Context of use: This function is used after inserting a child node into the full child of an internal node that is also full. 
From the insertion, the full child is rebalanced and split, and then since the internal node is full, when replacing the two
halves of that rebalanced child into the internal node's children this causes a second split. This function takes in the 
internal node's children, and the &quot;rebalanced&quot; split child nodes, as well as the index at which the &quot;rebalanced&quot; left and right 
child will be inserted and replaces the original child with those two halves</p>
<p>Note: Use when inserting two successive elements into a FULL array and splitting that array.
This is NOT the same as just splitting this array!</p>
<p>Assumptions: this function also assumes that the children array is full (no nulls)</p>
<p>Parameters:</p>
<p>children - the internal node's children array being split
rebalancedChildIndex - the index used to mark where the rebalanced left and right children will be inserted
leftChildInsert - the rebalanced left child being inserted
rightChildInsert - the rebalanced right child being inserted</p>
</p></div><div class="declaration"><h4 class="function" id="deleteAndShiftValuesOver"><code><span class="keyword">public func </span><span class="fnname">deleteAndShiftValuesOver</span>&lt;<span class="type">T</span>&gt;(<span class="parameter">array</span> : [<span class="keyword">var </span>?<span class="type">T</span>], <span class="parameter">deleteIndex</span> : <span class="type">Nat</span>) : <span class="type">T</span></code></h4><p><p>Specific to the BTree delete implementation (assumes node ordering such that nulls come at the end of the array)</p>
<p>Assumptions:</p>
<ul><li>All nulls come at the end of the array</li><li>Assumes the delete index provided is correct and non null - will trap otherwise</li><li>deleteIndex &lt; array.size()</li></ul>

<p>Deletes an element from the the array, and then shifts all non-null elements coming after that deleted element by 1
to the left. Returns the key-value that wer deleted</p>
</p></div><div class="declaration"><h4 class="function" id="replaceTwoWithElementAndShift"><code><span class="keyword">public func </span><span class="fnname">replaceTwoWithElementAndShift</span>&lt;<span class="type">T</span>&gt;(<br/>  <span class="parameter">array</span> : [<span class="keyword">var </span>?<span class="type">T</span>], <br/>  <span class="parameter">element</span> : <span class="type">T</span>, <br/>  <span class="parameter">replaceIndex</span> : <span class="type">Nat</span><br/>)</code></h4><p></p></div><div class="declaration"><h4 class="function" id="insertAtPostionAndDeleteAtPosition"><code><span class="keyword">public func </span><span class="fnname">insertAtPostionAndDeleteAtPosition</span>&lt;<span class="type">T</span>&gt;(<br/>  <span class="parameter">array</span> : [<span class="keyword">var </span>?<span class="type">T</span>], <br/>  <span class="parameter">insertElement</span> : ?<span class="type">T</span>, <br/>  <span class="parameter">insertIndex</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">deleteIndex</span> : <span class="type">Nat</span><br/>) : <span class="type">T</span></code></h4><p><p>BTree specific implementation</p>
<p>In a single iteration insert at one position of the array while deleting at another position of the array, shifting all
elements as appropriate</p>
<p>This is used when borrowing a key from an inorder predecessor/successor through the parent node</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.DeletionSide"><span class="keyword">type </span><span class="type">DeletionSide</span> = {#left; #right}</h4><p></p></div><div class="declaration"><h4 class="function" id="mergeParentWithChildrenAndDelete"><code><span class="keyword">public func </span><span class="fnname">mergeParentWithChildrenAndDelete</span>&lt;<span class="type">T</span>&gt;(<br/>  <span class="parameter">parentKV</span> : ?<span class="type">T</span>, <br/>  <span class="parameter">childCount</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">leftChild</span> : [<span class="keyword">var </span>?<span class="type">T</span>], <br/>  <span class="parameter">rightChild</span> : [<span class="keyword">var </span>?<span class="type">T</span>], <br/>  <span class="parameter">deleteIndex</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">deletionSide</span> : <a href="#type.DeletionSide"><span class="type">DeletionSide</span></a><br/>) : ([<span class="keyword">var </span>?<span class="type">T</span>], <span class="type">T</span>)</code></h4><p></p></div></div></body></html>